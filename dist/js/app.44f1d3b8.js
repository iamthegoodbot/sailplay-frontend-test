(function(t){function e(e){for(var i,a,o=e[0],l=e[1],c=e[2],f=0,p=[];f<o.length;f++)a=o[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},r={app:0},n=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("85ec"),r=s.n(i);r.a},"0642":function(t,e,s){},"18f2":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("layout")},n=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content_wrapper"},[s("div",{staticClass:"content_wrapper_inner"},[t._m(0),s("div",{staticClass:"filters_wrapper"},[s("div",{staticClass:"filters_list"},[s("div",{staticClass:"filters_list_field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchFieldValue,expression:"searchFieldValue"}],staticClass:"query_input",attrs:{type:"text",placeholder:"Поиск по имени и фамилии"},domProps:{value:t.searchFieldValue},on:{input:function(e){e.target.composing||(t.searchFieldValue=e.target.value)}}})]),s("div",{staticClass:"filters_list_field"},[t._m(1),s("label",{staticClass:"filters_list_field_input"},[s("div",{staticClass:"date_picker_wrapper"},[s("masked-input",{staticClass:"input_simple",attrs:{mask:"1111-11-11",placeholder:"Введите дату"},model:{value:t.minDate,callback:function(e){t.minDate=e},expression:"minDate"}})],1)]),s("label",{staticClass:"filters_list_field_input"},[s("div",{staticClass:"date_picker_wrapper"},[s("masked-input",{staticClass:"input_simple",attrs:{mask:"1111-11-11",placeholder:"Введите дату"},model:{value:t.maxDate,callback:function(e){t.maxDate=e},expression:"maxDate"}})],1)])]),s("div",{staticClass:"filters_list_field"},[s("a",{staticClass:"filter_field_expand",class:{open:t.isPointsFilterVisible},attrs:{href:"",onClick:"return false;"},on:{click:t.togglePointsFilter}},[s("span",{staticClass:"filter_field_expand_label"},[t._v("Баллы ")])])]),t.isPointsFilterVisible?s("div",{staticClass:"filters_list_field no_wrap",staticStyle:{"padding-left":"20px"}},[t._m(2),s("div",{staticClass:"slider_wrap"},[s("div",{staticClass:"slider_inputs_wrap"},[s("div",{staticClass:"range-slider"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.minPoints,expression:"minPoints",modifiers:{number:!0}}],attrs:{min:"0",max:"5000",step:"100",type:"range"},domProps:{value:t.minPoints},on:{change:t.setRangeCircles,__r:function(e){t.minPoints=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.maxPoints,expression:"maxPoints",modifiers:{number:!0}}],attrs:{min:"0",max:"5000",step:"100",type:"range"},domProps:{value:t.maxPoints},on:{change:t.setRangeCircles,__r:function(e){t.maxPoints=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"slider_inputs_placeholder"},[t._v(" "+t._s(t.minPoints)+" — "+t._s(t.maxPoints)+" ")])])])]):t._e()]),s("div",{staticClass:"filters_footer"},[s("div",{staticClass:"filters_footer_inner clearfix"},[s("span",{staticClass:"filters_footer_count"},[t._v(" "+t._s(t.USERS.length)+" клиентов ")]),s("button",{staticClass:"search_button",attrs:{type:"button"},on:{click:function(e){return t.applyFilters(t.searchFieldValue)}}},[t._v("Поиск")]),s("button",{staticClass:"reset_button",attrs:{type:"button"},on:{click:t.clearFilters}},[t._v("Сбросить")])])])]),s("div",{staticClass:"users_list_wrapper"},[s("table",{staticClass:"users_list"},[s("tr",[s("th",{on:{click:t.sortByName}},[s("div",[t._v("Имя и фамилия")])]),s("th",{on:{click:t.sortByDate}},[s("div",[t._v("Дата регистрации")])]),s("th",{on:{click:t.sortByPoints}},[s("div",[t._v("Баллы")])])]),t._l(t.paginatedUsers,(function(e){return s("tr",{key:e.id},[s("td",[t._v(" "+t._s(e.name)+" ")]),s("td",[t._v(" "+t._s(e.registration_date)+" ")]),s("td",[s("i",{staticClass:"user_points_icon"}),t._v(" "+t._s(e.points_earned)+" ")])])}))],2),s("div",{staticClass:"pagination_wrapper"},[s("table",{staticClass:"users_list_pagination"},[s("tr",{staticClass:"list_pagination__wrapper"},t._l(t.pages,(function(e){return s("td",{key:e,on:{click:function(s){return t.pageClick(e)}}},[s("span",{staticClass:"users_list_pagination_item selected"},[t._v(t._s(e)+" ")])])})),0)])])])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"route_title"},[s("h1",[t._v("Клиенты")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"filters_list_field_label type_date"},[s("span",{staticClass:"form_search_param_label"},[t._v("Дата регистрации")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"filters_list_field_label"},[s("span",{staticClass:"form_search_param_label"},[t._v("Кол-во заработанных баллов")])])}],l=(s("a4d3"),s("4de4"),s("4160"),s("caad"),s("d81d"),s("fb6a"),s("4e82"),s("0d03"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("2532"),s("159b"),s("2fa7")),c=s("2f62"),u=s("ab99");s("df7c");function f(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?f(Object(s),!0).forEach((function(e){Object(l["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"layout",components:{MaskedInput:u["a"]},data:function(){return{minPoints:0,maxPoints:5e3,minDate:"2013-09-10",maxDate:"2020-11-10",pageNum:1,usersPerPage:10,isPointsFilterVisible:!0,searchFieldValue:"",filteredUsers:[]}},computed:p({},Object(c["c"])(["USERS"]),{pages:function(){return this.filteredUsers.length?Math.ceil(this.filteredUsers.length/this.usersPerPage):Math.ceil(this.USERS.length/this.usersPerPage)},paginatedUsers:function(){var t=(this.pageNum-1)*this.usersPerPage,e=t+this.usersPerPage;return this.filteredUsers.length?this.filteredUsers.slice(t,e):this.USERS.slice(t,e)}}),methods:p({},Object(c["b"])(["GET_USERS_FROM_API"]),{togglePointsFilter:function(){this.isPointsFilterVisible=!this.isPointsFilterVisible},setRangeCircles:function(){if(this.minPoints>this.maxPoints){var t=this.maxPoints;this.maxPoints=this.minPoints,this.minPoints=t}},applyFilters:function(t){var e=this,s=this;if(!t)return this.filteredUsers=[],new Promise((function(t){e.USERS.map((function(t){t.points_earned>=s.minPoints&&t.points_earned<=s.maxPoints&&s.filteredUsers.push(t)})),t()})).then((function(){if(s.minDate||s.maxDate){var t=new Date(s.maxDate).getTime(),e=new Date(s.minDate).getTime();s.filteredUsers=s.filteredUsers.filter((function(s){var i=new Date(s.registration_date).getTime();if(i>=e&&i<=t)return s}))}}));this.filteredUsers=[],this.USERS.map((function(e){e.name.toLowerCase().includes(t.toLowerCase())&&e.points_earned>=s.minPoints&&e.points_earned<=s.maxPoints&&s.filteredUsers.push(e)}))},pageClick:function(t){this.pageNum=t},sortByName:function(){var t=this.USERS;this.filteredUsers.length&&(t=this.filteredUsers),t.sort((function(t,e){return t.name.localeCompare(e.name)}))},sortByPoints:function(){var t=this.USERS;this.filteredUsers.length&&(t=this.filteredUsers),t.sort((function(t,e){return t.points_spent-e.points_spent}))},sortByDate:function(){this.filteredUsers.length?this.filteredUsers.sort((function(t,e){return t.registration_date.localeCompare(e.registration_date)})):this.USERS.sort((function(t,e){return t.registration_date.localeCompare(e.registration_date)}))},clearFilters:function(){this.minPoints=0,this.maxPoints=5e3,this.searchFieldValue="",this.applyFilters()}}),created:function(){this.GET_USERS_FROM_API()}},_=d,m=(s("6bc5"),s("2877")),h=Object(m["a"])(_,a,o,!1,null,null,null),v=h.exports,b={name:"app",components:{layout:v}},g=b,P=(s("034f"),Object(m["a"])(g,r,n,!1,null,null,null)),y=P.exports,O={users:[]},C=s("bc3a"),S=s.n(C),w={GET_USERS_FROM_API:function(t){var e=t.commit;return S()("http://localhost:3000/users",{method:"GET"}).then((function(t){e("SET_USERS_TO_STORE",t.data)}))}},x={SET_USERS_TO_STORE:function(t,e){t.users=e}},j={USERS:function(t){return t.users}};function U(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function E(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?U(Object(s),!0).forEach((function(e){Object(l["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):U(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}i["a"].use(c["a"]);var k=E({},w),D=new c["a"].Store({state:O,getters:j,mutations:x,actions:k}),R=D;s("18f2"),s("5e74"),s("f35f"),s("b11f");i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(y)},store:R}).$mount("#app")},"5e74":function(t,e,s){},"6bc5":function(t,e,s){"use strict";var i=s("0642"),r=s.n(i);r.a},"85ec":function(t,e,s){},b11f:function(t,e,s){},f35f:function(t,e,s){}});
//# sourceMappingURL=app.44f1d3b8.js.map